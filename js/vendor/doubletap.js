(function(e){var t={swipeTolerance:40},n=function(t,n){this.target=e(t),this.touch=n,this.startX=this.currentX=n.screenX,this.startY=this.currentY=n.screenY,this.eventType=null};n.options={},n.latestTap=null,n.prototype.move=function(e){this.currentX=e.screenX,this.currentY=e.screenY},n.prototype.process=function(){var e=this.currentX-this.startX,t=this.currentY-this.startY;e==0&&t==0?this.checkForDoubleTap():Math.abs(t)>n.options.swipeTolerance&&Math.abs(t)>Math.abs(e)?(this.eventType=t>0?"swipedown":"swipeup",this.target.trigger("swipe",[this])):Math.abs(e)>n.options.swipeTolerance&&(this.eventType=e>0?"swiperight":"swipeleft",this.target.trigger("swipe",[this])),this.eventType&&this.target.trigger(this.eventType,[this]),this.target.trigger("touch",[this])},n.prototype.checkForDoubleTap=function(){n.latestTap&&new Date-n.latestTap<400&&(this.eventType="doubletap"),this.eventType||(this.eventType="tap"),n.latestTap=new Date};var r=function(r,i){n.options=e.extend(t,i),r.bind("touchstart",this.touchStart),r.bind("touchmove",this.touchMove),r.bind("touchcancel",this.touchCancel),r.bind("touchend",this.touchEnd)};r.prototype.touchStart=function(e){var t=this;r.eachTouch(e,function(e){r.touches[e.identifier]=new n(t,e)})},r.prototype.touchMove=function(e){r.eachTouch(e,function(e){var t=r.touches[e.identifier];t&&t.move(e)})},r.prototype.touchCancel=function(e){r.eachTouch(e,function(e){r.purge(e,!0)})},r.prototype.touchEnd=function(e){r.eachTouch(e,function(e){r.purge(e)})},r.touches={},r.purge=function(e,t){if(!t){var n=r.touches[e.identifier];n&&n.process()}delete r.touches[e.identifier]},r.eachTouch=function(e,t){var e=e.originalEvent,n=e.changedTouches.length;for(var r=0;r<n;r++)t(e.changedTouches[r])},e.fn.addSwipeEvents=function(e,t){return!t&&jQuery.isFunction(e)&&(t=e,e=null),new r(this,e),t&&this.bind("touch",t),this}})(jQuery);
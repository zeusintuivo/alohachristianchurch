(function(){function e(t,n){t instanceof e?(this.enc=t.enc,this.pos=t.pos):(this.enc=t,this.pos=n)}function t(e,t,n,r,i){this.stream=e,this.header=t,this.length=n,this.tag=r,this.sub=i}function i(e){var t,i,s="";for(t=0;t+3<=e.length;t+=3)i=parseInt(e.substring(t,t+3),16),s+=n.charAt(i>>6)+n.charAt(i&63);t+1==e.length?(i=parseInt(e.substring(t,t+1),16),s+=n.charAt(i<<2)):t+2==e.length&&(i=parseInt(e.substring(t,t+2),16),s+=n.charAt(i>>2)+n.charAt((i&3)<<4));while((s.length&3)>0)s+=r;return s}function s(e){var t="",i,s=0,o;for(i=0;i<e.length;++i){if(e.charAt(i)==r)break;v=n.indexOf(e.charAt(i));if(v<0)continue;s==0?(t+=E(v>>2),o=v&3,s=1):s==1?(t+=E(o<<2|v>>4),o=v&15,s=2):s==2?(t+=E(o),t+=E(v>>2),o=v&3,s=3):(t+=E(o<<2|v>>4),t+=E(v&15),s=0)}return s==1&&(t+=E(o<<2)),t}function o(e){var t=s(e),n,r=new Array;for(n=0;2*n<t.length;++n)r[n]=parseInt(t.substring(2*n,2*n+2),16);return r}function l(e,t,n){e!=null&&("number"==typeof e?this.fromNumber(e,t,n):t==null&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function c(){return new l(null)}function h(e,t,n,r,i,s){while(--s>=0){var o=t*this[e++]+n[r]+i;i=Math.floor(o/67108864),n[r++]=o&67108863}return i}function p(e,t,n,r,i,s){var o=t&32767,u=t>>15;while(--s>=0){var a=this[e]&32767,f=this[e++]>>15,l=u*a+f*o;a=o*a+((l&32767)<<15)+n[r]+(i&1073741823),i=(a>>>30)+(l>>>15)+u*f+(i>>>30),n[r++]=a&1073741823}return i}function d(e,t,n,r,i,s){var o=t&16383,u=t>>14;while(--s>=0){var a=this[e]&16383,f=this[e++]>>14,l=u*a+f*o;a=o*a+((l&16383)<<14)+n[r]+i,i=(a>>28)+(l>>14)+u*f,n[r++]=a&268435455}return i}function E(e){return g.charAt(e)}function S(e,t){var n=y[e.charCodeAt(t)];return n==null?-1:n}function x(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function T(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+DV:this.t=0}function N(e){var t=c();return t.fromInt(e),t}function C(e,t){var n;if(t==16)n=4;else if(t==8)n=3;else if(t==256)n=8;else if(t==2)n=1;else if(t==32)n=5;else{if(t!=4){this.fromRadix(e,t);return}n=2}this.t=0,this.s=0;var r=e.length,i=!1,s=0;while(--r>=0){var o=n==8?e[r]&255:S(e,r);if(o<0){e.charAt(r)=="-"&&(i=!0);continue}i=!1,s==0?this[this.t++]=o:s+n>this.DB?(this[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this[this.t++]=o>>this.DB-s):this[this.t-1]|=o<<s,s+=n,s>=this.DB&&(s-=this.DB)}n==8&&(e[0]&128)!=0&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&l.ZERO.subTo(this,this)}function k(){var e=this.s&this.DM;while(this.t>0&&this[this.t-1]==e)--this.t}function L(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else{if(e!=4)return this.toRadix(e);t=2}var n=(1<<t)-1,r,i=!1,s="",o=this.t,u=this.DB-o*this.DB%t;if(o-->0){u<this.DB&&(r=this[o]>>u)>0&&(i=!0,s=E(r));while(o>=0)u<t?(r=(this[o]&(1<<u)-1)<<t-u,r|=this[--o]>>(u+=this.DB-t)):(r=this[o]>>(u-=t)&n,u<=0&&(u+=this.DB,--o)),r>0&&(i=!0),i&&(s+=E(r))}return i?s:"0"}function A(){var e=c();return l.ZERO.subTo(this,e),e}function O(){return this.s<0?this.negate():this}function M(e){var t=this.s-e.s;if(t!=0)return t;var n=this.t;t=n-e.t;if(t!=0)return this.s<0?-t:t;while(--n>=0)if((t=this[n]-e[n])!=0)return t;return 0}function _(e){var t=1,n;return(n=e>>>16)!=0&&(e=n,t+=16),(n=e>>8)!=0&&(e=n,t+=8),(n=e>>4)!=0&&(e=n,t+=4),(n=e>>2)!=0&&(e=n,t+=2),(n=e>>1)!=0&&(e=n,t+=1),t}function D(){return this.t<=0?0:this.DB*(this.t-1)+_(this[this.t-1]^this.s&this.DM)}function P(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s}function H(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s}function B(e,t){var n=e%this.DB,r=this.DB-n,i=(1<<r)-1,s=Math.floor(e/this.DB),o=this.s<<n&this.DM,u;for(u=this.t-1;u>=0;--u)t[u+s+1]=this[u]>>r|o,o=(this[u]&i)<<n;for(u=s-1;u>=0;--u)t[u]=0;t[s]=o,t.t=this.t+s+1,t.s=this.s,t.clamp()}function j(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t){t.t=0;return}var r=e%this.DB,i=this.DB-r,s=(1<<r)-1;t[0]=this[n]>>r;for(var o=n+1;o<this.t;++o)t[o-n-1]|=(this[o]&s)<<i,t[o-n]=this[o]>>r;r>0&&(t[this.t-n-1]|=(this.s&s)<<i),t.t=this.t-n,t.clamp()}function F(e,t){var n=0,r=0,i=Math.min(e.t,this.t);while(n<i)r+=this[n]-e[n],t[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){r-=e.s;while(n<this.t)r+=this[n],t[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{r+=this.s;while(n<e.t)r-=e[n],t[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[n++]=this.DV+r:r>0&&(t[n++]=r),t.t=n,t.clamp()}function I(e,t){var n=this.abs(),r=e.abs(),i=n.t;t.t=i+r.t;while(--i>=0)t[i]=0;for(i=0;i<r.t;++i)t[i+n.t]=n.am(0,r[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&l.ZERO.subTo(t,t)}function q(e){var t=this.abs(),n=e.t=2*t.t;while(--n>=0)e[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()}function R(e,t,n){var r=e.abs();if(r.t<=0)return;var i=this.abs();if(i.t<r.t){t!=null&&t.fromInt(0),n!=null&&this.copyTo(n);return}n==null&&(n=c());var s=c(),o=this.s,u=e.s,a=this.DB-_(r[r.t-1]);a>0?(r.lShiftTo(a,s),i.lShiftTo(a,n)):(r.copyTo(s),i.copyTo(n));var f=s.t,h=s[f-1];if(h==0)return;var p=h*(1<<this.F1)+(f>1?s[f-2]>>this.F2:0),d=this.FV/p,v=(1<<this.F1)/p,m=1<<this.F2,g=n.t,y=g-f,b=t==null?c():t;s.dlShiftTo(y,b),n.compareTo(b)>=0&&(n[n.t++]=1,n.subTo(b,n)),l.ONE.dlShiftTo(f,b),b.subTo(s,s);while(s.t<f)s[s.t++]=0;while(--y>=0){var w=n[--g]==h?this.DM:Math.floor(n[g]*d+(n[g-1]+m)*v);if((n[g]+=s.am(0,w,n,y,0,f))<w){s.dlShiftTo(y,b),n.subTo(b,n);while(n[g]<--w)n.subTo(b,n)}}t!=null&&(n.drShiftTo(f,t),o!=u&&l.ZERO.subTo(t,t)),n.t=f,n.clamp(),a>0&&n.rShiftTo(a,n),o<0&&l.ZERO.subTo(n,n)}function U(e){var t=c();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(l.ZERO)>0&&e.subTo(t,t),t}function z(e){this.m=e}function W(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function X(e){return e}function V(e){e.divRemTo(this.m,null,e)}function $(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function J(e,t){e.squareTo(t),this.reduce(t)}function K(){if(this.t<1)return 0;var e=this[0];if((e&1)==0)return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function Q(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function G(e){var t=c();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(l.ZERO)>0&&this.m.subTo(t,t),t}function Y(e){var t=c();return e.copyTo(t),this.reduce(t),t}function Z(e){while(e.t<=this.mt2)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=e[t]&32767,r=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;n=t+this.m.t,e[n]+=this.m.am(0,r,e,t,0,this.m.t);while(e[n]>=e.DV)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function et(e,t){e.squareTo(t),this.reduce(t)}function tt(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function nt(){return(this.t>0?this[0]&1:this.s)==0}function rt(e,t){if(e>4294967295||e<1)return l.ONE;var n=c(),r=c(),i=t.convert(this),s=_(e)-1;i.copyTo(n);while(--s>=0){t.sqrTo(n,r);if((e&1<<s)>0)t.mulTo(r,i,n);else{var o=n;n=r,r=o}}return t.revert(n)}function it(e,t){var n;return e<256||t.isEven()?n=new z(t):n=new Q(t),this.exp(e,n)}function st(e,t){return new l(e,t)}function ot(e,t){var n="",r=0;while(r+t<e.length)n+=e.substring(r,r+t)+"\n",r+=t;return n+e.substring(r,e.length)}function ut(e){return e<16?"0"+e.toString(16):e.toString(16)}function at(e,t){if(t<e.length+11)return alert("Message too long for RSA"),null;var n=new Array,r=e.length-1;while(r>=0&&t>0){var i=e.charCodeAt(r--);i<128?n[--t]=i:i>127&&i<2048?(n[--t]=i&63|128,n[--t]=i>>6|192):(n[--t]=i&63|128,n[--t]=i>>6&63|128,n[--t]=i>>12|224)}n[--t]=0;var s=0,o=0,u=0;while(t>2)u==0&&(o=dt.random.randomWords(1,0)[0]),s=o>>u&255,u=(u+8)%32,s!=0&&(n[--t]=s);return n[--t]=2,n[--t]=0,new l(n)}function ft(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function lt(e,t){e!=null&&t!=null&&e.length>0&&t.length>0?(this.n=st(e,16),this.e=parseInt(t,16)):alert("Invalid RSA public key")}function ct(e){return e.modPowInt(this.e,this.n)}function ht(e){var t=at(e,this.n.bitLength()+7>>3);if(t==null)return null;var n=this.doPublic(t);if(n==null)return null;var r=n.toString(16);return(r.length&1)==0?r:"0"+r}function pt(e){var t=this.encrypt(e);return t?i(t):null}e.prototype.get=function(e){e==undefined&&(e=this.pos++);if(e>=this.enc.length)throw"Requesting byte offset "+e+" on a stream of length "+this.enc.length;return this.enc[e]},e.prototype.hexDigits="0123456789ABCDEF",e.prototype.hexByte=function(e){return this.hexDigits.charAt(e>>4&15)+this.hexDigits.charAt(e&15)},e.prototype.hexDump=function(e,t){var n="";for(var r=e;r<t;++r){n+=this.hexByte(this.get(r));switch(r&15){case 7:n+="  ";break;case 15:n+="\n";break;default:n+=" "}}return n},e.prototype.parseStringISO=function(e,t){var n="";for(var r=e;r<t;++r)n+=String.fromCharCode(this.get(r));return n},e.prototype.parseStringUTF=function(e,t){var n="",r=0;for(var i=e;i<t;){var r=this.get(i++);r<128?n+=String.fromCharCode(r):r>191&&r<224?n+=String.fromCharCode((r&31)<<6|this.get(i++)&63):n+=String.fromCharCode((r&15)<<12|(this.get(i++)&63)<<6|this.get(i++)&63)}return n},e.prototype.reTime=/^((?:1[89]|2\d)?\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/,e.prototype.parseTime=function(e,t){var n=this.parseStringISO(e,t),r=this.reTime.exec(n);return r?(n=r[1]+"-"+r[2]+"-"+r[3]+" "+r[4],r[5]&&(n+=":"+r[5],r[6]&&(n+=":"+r[6],r[7]&&(n+="."+r[7]))),r[8]&&(n+=" UTC",r[8]!="Z"&&(n+=r[8],r[9]&&(n+=":"+r[9]))),n):"Unrecognized time: "+n},e.prototype.parseInteger=function(e,t){var n=t-e;if(n>4){n<<=3;var r=this.get(e);if(r==0)n-=8;else while(r<128)r<<=1,--n;return"("+n+" bit)"}var i=0;for(var s=e;s<t;++s)i=i<<8|this.get(s);return i},e.prototype.parseBitString=function(e,t){var n=this.get(e),r=(t-e-1<<3)-n,i="("+r+" bit)";if(r<=20){var s=n;i+=" ";for(var o=t-1;o>e;--o){var u=this.get(o);for(var a=s;a<8;++a)i+=u>>a&1?"1":"0";s=0}}return i},e.prototype.parseOctetString=function(e,t){var n=t-e,r="("+n+" byte) ";n>20&&(t=e+20);for(var i=e;i<t;++i)r+=this.hexByte(this.get(i));return n>20&&(r+=String.fromCharCode(8230)),r},e.prototype.parseOID=function(e,t){var n,r=0,i=0;for(var s=e;s<t;++s){var o=this.get(s);r=r<<7|o&127,i+=7,o&128||(n==undefined?n=parseInt(r/40)+"."+r%40:n+="."+(i>=31?"bigint":r),r=i=0),n+=String.fromCharCode()}return n},t.prototype.typeName=function(){if(this.tag==undefined)return"unknown";var e=this.tag>>6,t=this.tag>>5&1,n=this.tag&31;switch(e){case 0:switch(n){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString";default:return"Universal_"+n.toString(16)};case 1:return"Application_"+n.toString(16);case 2:return"["+n+"]";case 3:return"Private_"+n.toString(16)}},t.prototype.content=function(){if(this.tag==undefined)return null;var e=this.tag>>6;if(e!=0)return this.sub==null?null:"("+this.sub.length+")";var t=this.tag&31,n=this.posContent(),r=Math.abs(this.length);switch(t){case 1:return this.stream.get(n)==0?"false":"true";case 2:return this.stream.parseInteger(n,n+r);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(n,n+r);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(n,n+r);case 6:return this.stream.parseOID(n,n+r);case 16:case 17:return"("+this.sub.length+" elem)";case 12:return this.stream.parseStringUTF(n,n+r);case 18:case 19:case 20:case 21:case 22:case 26:return this.stream.parseStringISO(n,n+r);case 23:case 24:return this.stream.parseTime(n,n+r)}return null},t.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(this.sub==null?"null":this.sub.length)+"]"},t.prototype.print=function(e){e==undefined&&(e=""),document.writeln(e+this);if(this.sub!=null){e+="  ";for(var t=0,n=this.sub.length;t<n;++t)this.sub[t].print(e)}},t.prototype.toPrettyString=function(e){e==undefined&&(e="");var t=e+this.typeName()+" @"+this.stream.pos;this.length>=0&&(t+="+"),t+=this.length,this.tag&32?t+=" (constructed)":(this.tag==3||this.tag==4)&&this.sub!=null&&(t+=" (encapsulates)"),t+="\n";if(this.sub!=null){e+="  ";for(var n=0,r=this.sub.length;n<r;++n)t+=this.sub[n].toPrettyString(e)}return t},t.prototype.posStart=function(){return this.stream.pos},t.prototype.posContent=function(){return this.stream.pos+this.header},t.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)},t.decodeLength=function(e){var t=e.get(),n=t&127;if(n==t)return n;if(n>3)throw"Length over 24 bits not supported at position "+(e.pos-1);if(n==0)return-1;t=0;for(var r=0;r<n;++r)t=t<<8|e.get();return t},t.hasContent=function(n,r,i){if(n&32)return!0;if(n<3||n>4)return!1;var s=new e(i);n==3&&s.get();var o=s.get();if(o>>6&1)return!1;try{var u=t.decodeLength(s);return s.pos-i.pos+u==r}catch(a){return!1}},t.decode=function(n){n instanceof e||(n=new e(n,0));var r=new e(n),i=n.get(),s=t.decodeLength(n),o=n.pos-r.pos,u=null;if(t.hasContent(i,s,n)){var a=n.pos;i==3&&n.get(),u=[];if(s>=0){var f=a+s;while(n.pos<f)u[u.length]=t.decode(n);if(n.pos!=f)throw"Content size is not correct for container starting at offset "+a}else try{for(;;){var l=t.decode(n);if(l.tag==0)break;u[u.length]=l}s=a-n.pos}catch(c){throw"Exception while decoding undefined length content: "+c}}else n.pos+=s;return new t(r,o,s,i,u)};var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="=",u,a=0xdeadbeefcafe,f=(a&16777215)==15715070;f&&navigator.appName=="Microsoft Internet Explorer"?(l.prototype.am=p,u=30):f&&navigator.appName!="Netscape"?(l.prototype.am=h,u=26):(l.prototype.am=d,u=28),l.prototype.DB=u,l.prototype.DM=(1<<u)-1,l.prototype.DV=1<<u;var m=52;l.prototype.FV=Math.pow(2,m),l.prototype.F1=m-u,l.prototype.F2=2*u-m;var g="0123456789abcdefghijklmnopqrstuvwxyz",y=new Array,b,w;b="0".charCodeAt(0);for(w=0;w<=9;++w)y[b++]=w;b="a".charCodeAt(0);for(w=10;w<36;++w)y[b++]=w;b="A".charCodeAt(0);for(w=10;w<36;++w)y[b++]=w;z.prototype.convert=W,z.prototype.revert=X,z.prototype.reduce=V,z.prototype.mulTo=$,z.prototype.sqrTo=J,Q.prototype.convert=G,Q.prototype.revert=Y,Q.prototype.reduce=Z,Q.prototype.mulTo=tt,Q.prototype.sqrTo=et,l.prototype.copyTo=x,l.prototype.fromInt=T,l.prototype.fromString=C,l.prototype.clamp=k,l.prototype.dlShiftTo=P,l.prototype.drShiftTo=H,l.prototype.lShiftTo=B,l.prototype.rShiftTo=j,l.prototype.subTo=F,l.prototype.multiplyTo=I,l.prototype.squareTo=q,l.prototype.divRemTo=R,l.prototype.invDigit=K,l.prototype.isEven=nt,l.prototype.exp=rt,l.prototype.toString=L,l.prototype.negate=A,l.prototype.abs=O,l.prototype.compareTo=M,l.prototype.bitLength=D,l.prototype.mod=U,l.prototype.modPowInt=it,l.ZERO=N(0),l.ONE=N(1),ft.prototype.doPublic=ct,ft.prototype.setPublic=lt,ft.prototype.encrypt=ht,ft.prototype.encrypt_b64=pt;var dt={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(e){this.toString=function(){return"CORRUPT: "+this.message},this.message=e},invalid:function(e){this.toString=function(){return"INVALID: "+this.message},this.message=e},bug:function(e){this.toString=function(){return"BUG: "+this.message},this.message=e},notReady:function(e){this.toString=function(){return"NOT READY: "+this.message},this.message=e}}};typeof module!="undefined"&&module.exports&&(module.exports=dt),dt.cipher.aes=function(e){this._tables[0][0][0]||this._precompute();var t,n,r,i,s,o=this._tables[0][4],u=this._tables[1],a=e.length,f=1;if(a!==4&&a!==6&&a!==8)throw new dt.exception.invalid("invalid aes key size");this._key=[i=e.slice(0),s=[]];for(t=a;t<4*a+28;t++){r=i[t-1];if(t%a===0||a===8&&t%a===4)r=o[r>>>24]<<24^o[r>>16&255]<<16^o[r>>8&255]<<8^o[r&255],t%a===0&&(r=r<<8^r>>>24^f<<24,f=f<<1^(f>>7)*283);i[t]=i[t-a]^r}for(n=0;t;n++,t--)r=i[n&3?t:t-4],t<=4||n<4?s[n]=r:s[n]=u[0][o[r>>>24]]^u[1][o[r>>16&255]]^u[2][o[r>>8&255]]^u[3][o[r&255]]},dt.cipher.aes.prototype={encrypt:function(e){return this._crypt(e,0)},decrypt:function(e){return this._crypt(e,1)},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var e=this._tables[0],t=this._tables[1],n=e[4],r=t[4],i,s,o,u=[],a=[],f,l,c,h,p,d;for(i=0;i<256;i++)a[(u[i]=i<<1^(i>>7)*283)^i]=i;for(s=o=0;!n[s];s^=f||1,o=a[o]||1){h=o^o<<1^o<<2^o<<3^o<<4,h=h>>8^h&255^99,n[s]=h,r[h]=s,c=u[l=u[f=u[s]]],d=c*16843009^l*65537^f*257^s*16843008,p=u[h]*257^h*16843008;for(i=0;i<4;i++)e[i][s]=p=p<<24^p>>>8,t[i][h]=d=d<<24^d>>>8}for(i=0;i<5;i++)e[i]=e[i].slice(0),t[i]=t[i].slice(0)},_crypt:function(e,t){if(e.length!==4)throw new dt.exception.invalid("invalid aes block size");var n=this._key[t],r=e[0]^n[0],i=e[t?3:1]^n[1],s=e[2]^n[2],o=e[t?1:3]^n[3],u,a,f,l=n.length/4-2,c,h=4,p=[0,0,0,0],d=this._tables[t],v=d[0],m=d[1],g=d[2],y=d[3],b=d[4];for(c=0;c<l;c++)u=v[r>>>24]^m[i>>16&255]^g[s>>8&255]^y[o&255]^n[h],a=v[i>>>24]^m[s>>16&255]^g[o>>8&255]^y[r&255]^n[h+1],f=v[s>>>24]^m[o>>16&255]^g[r>>8&255]^y[i&255]^n[h+2],o=v[o>>>24]^m[r>>16&255]^g[i>>8&255]^y[s&255]^n[h+3],h+=4,r=u,i=a,s=f;for(c=0;c<4;c++)p[t?3&-c:c]=b[r>>>24]<<24^b[i>>16&255]<<16^b[s>>8&255]<<8^b[o&255]^n[h++],u=r,r=i,i=s,s=o,o=u;return p}},dt.bitArray={bitSlice:function(e,t,n){return e=dt.bitArray._shiftRight(e.slice(t/32),32-(t&31)).slice(1),n===undefined?e:dt.bitArray.clamp(e,n-t)},extract:function(e,t,n){var r,i=Math.floor(-t-n&31);return(t+n-1^t)&-32?r=e[t/32|0]<<32-i^e[t/32+1|0]>>>i:r=e[t/32|0]>>>i,r&(1<<n)-1},concat:function(e,t){if(e.length===0||t.length===0)return e.concat(t);var n,r,i=e[e.length-1],s=dt.bitArray.getPartial(i);return s===32?e.concat(t):dt.bitArray._shiftRight(t,s,i|0,e.slice(0,e.length-1))},bitLength:function(e){var t=e.length,n;return t===0?0:(n=e[t-1],(t-1)*32+dt.bitArray.getPartial(n))},clamp:function(e,t){if(e.length*32<t)return e;e=e.slice(0,Math.ceil(t/32));var n=e.length;return t&=31,n>0&&t&&(e[n-1]=dt.bitArray.partial(t,e[n-1]&2147483648>>t-1,1)),e},partial:function(e,t,n){return e===32?t:(n?t|0:t<<32-e)+e*1099511627776},getPartial:function(e){return Math.round(e/1099511627776)||32},equal:function(e,t){if(dt.bitArray.bitLength(e)!==dt.bitArray.bitLength(t))return!1;var n=0,r;for(r=0;r<e.length;r++)n|=e[r]^t[r];return n===0},_shiftRight:function(e,t,n,r){var i,s=0,o;r===undefined&&(r=[]);for(;t>=32;t-=32)r.push(n),n=0;if(t===0)return r.concat(e);for(i=0;i<e.length;i++)r.push(n|e[i]>>>t),n=e[i]<<32-t;return s=e.length?e[e.length-1]:0,o=dt.bitArray.getPartial(s),r.push(dt.bitArray.partial(t+o&31,t+o>32?n:r.pop(),1)),r},_xor4:function(e,t){return[e[0]^t[0],e[1]^t[1],e[2]^t[2],e[3]^t[3]]}},dt.codec.hex={fromBits:function(e){var t="",n,r;for(n=0;n<e.length;n++)t+=((e[n]|0)+0xf00000000000).toString(16).substr(4);return t.substr(0,dt.bitArray.bitLength(e)/4)},toBits:function(e){var t,n=[],r;e=e.replace(/\s|0x/g,""),r=e.length,e+="00000000";for(t=0;t<e.length;t+=8)n.push(parseInt(e.substr(t,8),16)^0);return dt.bitArray.clamp(n,r*4)}},dt.codec.utf8String={fromBits:function(e){var t="",n=dt.bitArray.bitLength(e),r,i;for(r=0;r<n/8;r++)(r&3)===0&&(i=e[r/4]),t+=String.fromCharCode(i>>>24),i<<=8;return decodeURIComponent(escape(t))},toBits:function(e){e=unescape(encodeURIComponent(e));var t=[],n,r=0;for(n=0;n<e.length;n++)r=r<<8|e.charCodeAt(n),(n&3)===3&&(t.push(r),r=0);return n&3&&t.push(dt.bitArray.partial(8*(n&3),r)),t}},dt.codec.base64={_chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(e,t,n){var r="",i,s=0,o=dt.codec.base64._chars,u=0,a=dt.bitArray.bitLength(e);n&&(o=o.substr(0,62)+"-_");for(i=0;r.length*6<a;)r+=o.charAt((u^e[i]>>>s)>>>26),s<6?(u=e[i]<<6-s,s+=26,i++):(u<<=6,s-=6);while(r.length&3&&!t)r+="=";return r},toBits:function(e,t){e=e.replace(/\s|=/g,"");var n=[],r,i=0,s=dt.codec.base64._chars,o=0,u;t&&(s=s.substr(0,62)+"-_");for(r=0;r<e.length;r++){u=s.indexOf(e.charAt(r));if(u<0)throw new dt.exception.invalid("this isn't base64!");i>26?(i-=26,n.push(o^u>>>i),o=u<<32-i):(i+=6,o^=u<<32-i)}return i&56&&n.push(dt.bitArray.partial(i&56,o,1)),n}},dt.codec.base64url={fromBits:function(e){return dt.codec.base64.fromBits(e,1,1)},toBits:function(e){return dt.codec.base64.toBits(e,1)}},dt.beware===undefined&&(dt.beware={}),dt.beware["CBC mode is dangerous because it doesn't protect message integrity."]=function(){dt.mode.cbc={name:"cbc",encrypt:function(e,t,n,r){if(r&&r.length)throw new dt.exception.invalid("cbc can't authenticate data");if(dt.bitArray.bitLength(n)!==128)throw new dt.exception.invalid("cbc iv must be 128 bits");var i,s=dt.bitArray,o=s._xor4,u=s.bitLength(t),a=0,f=[];if(u&7)throw new dt.exception.invalid("pkcs#5 padding only works for multiples of a byte");for(i=0;a+128<=u;i+=4,a+=128)n=e.encrypt(o(n,t.slice(i,i+4))),f.splice(i,0,n[0],n[1],n[2],n[3]);return u=(16-(u>>3&15))*16843009,n=e.encrypt(o(n,s.concat(t,[u,u,u,u]).slice(i,i+4))),f.splice(i,0,n[0],n[1],n[2],n[3]),f},decrypt:function(e,t,n,r){if(r&&r.length)throw new dt.exception.invalid("cbc can't authenticate data");if(dt.bitArray.bitLength(n)!==128)throw new dt.exception.invalid("cbc iv must be 128 bits");if(dt.bitArray.bitLength(t)&127||!t.length)throw new dt.exception.corrupt("cbc ciphertext must be a positive multiple of the block size");var i,s=dt.bitArray,o=s._xor4,u,a,f=[];r=r||[];for(i=0;i<t.length;i+=4)u=t.slice(i,i+4),a=o(n,e.decrypt(u)),f.splice(i,0,a[0],a[1],a[2],a[3]),n=u;u=f[i-1]&255;if(u==0||u>16)throw new dt.exception.corrupt("pkcs#5 padding corrupt");a=u*16843009;if(!s.equal(s.bitSlice([a,a,a,a],0,u*8),s.bitSlice(f,f.length*32-u*8,f.length*32)))throw new dt.exception.corrupt("pkcs#5 padding corrupt");return s.bitSlice(f,0,f.length*32-u*8)}}},dt.misc.hmac=function(e,t){this._hash=t=t||dt.hash.sha256;var n=[[],[]],r,i=t.prototype.blockSize/32;this._baseHash=[new t,new t],e.length>i&&(e=t.hash(e));for(r=0;r<i;r++)n[0][r]=e[r]^909522486,n[1][r]=e[r]^1549556828;this._baseHash[0].update(n[0]),this._baseHash[1].update(n[1])},dt.misc.hmac.prototype.encrypt=dt.misc.hmac.prototype.mac=function(e,t){var n=(new this._hash(this._baseHash[0])).update(e,t).finalize();return(new this._hash(this._baseHash[1])).update(n).finalize()},dt.hash.sha256=function(e){this._key[0]||this._precompute(),e?(this._h=e._h.slice(0),this._buffer=e._buffer.slice(0),this._length=e._length):this.reset()},dt.hash.sha256.hash=function(e){return(new dt.hash.sha256).update(e).finalize()},dt.hash.sha256.prototype={blockSize:512,reset:function(){return this._h=this._init.slice(0),this._buffer=[],this._length=0,this},update:function(e){typeof e=="string"&&(e=dt.codec.utf8String.toBits(e));var t,n=this._buffer=dt.bitArray.concat(this._buffer,e),r=this._length,i=this._length=r+dt.bitArray.bitLength(e);for(t=512+r&-512;t<=i;t+=512)this._block(n.splice(0,16));return this},finalize:function(){var e,t=this._buffer,n=this._h;t=dt.bitArray.concat(t,[dt.bitArray.partial(1,1)]);for(e=t.length+2;e&15;e++)t.push(0);t.push(Math.floor(this._length/4294967296)),t.push(this._length|0);while(t.length)this._block(t.splice(0,16));return this.reset(),n},_init:[],_key:[],_precompute:function(){function r(e){return(e-Math.floor(e))*4294967296|0}var e=0,t=2,n;e:for(;e<64;t++){for(n=2;n*n<=t;n++)if(t%n===0)continue e;e<8&&(this._init[e]=r(Math.pow(t,.5))),this._key[e]=r(Math.pow(t,1/3)),e++}},_block:function(e){var t,n,r,i,s=e.slice(0),o=this._h,u=this._key,a=o[0],f=o[1],l=o[2],c=o[3],h=o[4],p=o[5],d=o[6],v=o[7];for(t=0;t<64;t++)t<16?n=s[t]:(r=s[t+1&15],i=s[t+14&15],n=s[t&15]=(r>>>7^r>>>18^r>>>3^r<<25^r<<14)+(i>>>17^i>>>19^i>>>10^i<<15^i<<13)+s[t&15]+s[t+9&15]|0),n=n+v+(h>>>6^h>>>11^h>>>25^h<<26^h<<21^h<<7)+(d^h&(p^d))+u[t],v=d,d=p,p=h,h=c+n|0,c=l,l=f,f=a,a=n+(f&l^c&(f^l))+(f>>>2^f>>>13^f>>>22^f<<30^f<<19^f<<10)|0;o[0]=o[0]+a|0,o[1]=o[1]+f|0,o[2]=o[2]+l|0,o[3]=o[3]+c|0,o[4]=o[4]+h|0,o[5]=o[5]+p|0,o[6]=o[6]+d|0,o[7]=o[7]+v|0}},dt.random={randomWords:function(e,t){var n=[],r,i=this.isReady(t),s;if(i===this._NOT_READY)throw new dt.exception.notReady("generator isn't seeded");i&this._REQUIRES_RESEED&&this._reseedFromPools(!(i&this._READY));for(r=0;r<e;r+=4)(r+1)%this._MAX_WORDS_PER_BURST===0&&this._gate(),s=this._gen4words(),n.push(s[0],s[1],s[2],s[3]);return this._gate(),n.slice(0,e)},setDefaultParanoia:function(e){this._defaultParanoia=e},addEntropy:function(e,t,n){n=n||"user";var r,i,s,o=(new Date).valueOf(),u=this._robins[n],a=this.isReady(),f=0;r=this._collectorIds[n],r===undefined&&(r=this._collectorIds[n]=this._collectorIdNext++),u===undefined&&(u=this._robins[n]=0),this._robins[n]=(this._robins[n]+1)%this._pools.length;switch(typeof e){case"number":t===undefined&&(t=1),this._pools[u].update([r,this._eventId++,1,t,o,1,e|0]);break;case"object":var l=Object.prototype.toString.call(e);if(l==="[object Uint32Array]"){s=[];for(i=0;i<e.length;i++)s.push(e[i]);e=s}else{l!=="[object Array]"&&(f=1);for(i=0;i<e.length&&!f;i++)typeof e[i]!="number"&&(f=1)}if(!f){if(t===undefined){t=0;for(i=0;i<e.length;i++){s=e[i];while(s>0)t++,s>>>=1}}this._pools[u].update([r,this._eventId++,2,t,o,e.length].concat(e))}break;case"string":t===undefined&&(t=e.length),this._pools[u].update([r,this._eventId++,3,t,o,e.length]),this._pools[u].update(e);break;default:f=1}if(f)throw new dt.exception.bug("random: addEntropy only supports number, array of numbers or string");this._poolEntropy[u]+=t,this._poolStrength+=t,a===this._NOT_READY&&(this.isReady()!==this._NOT_READY&&this._fireEvent("seeded",Math.max(this._strength,this._poolStrength)),this._fireEvent("progress",this.getProgress()))},isReady:function(e){var t=this._PARANOIA_LEVELS[e!==undefined?e:this._defaultParanoia];return this._strength&&this._strength>=t?this._poolEntropy[0]>this._BITS_PER_RESEED&&(new Date).valueOf()>this._nextReseed?this._REQUIRES_RESEED|this._READY:this._READY:this._poolStrength>=t?this._REQUIRES_RESEED|this._NOT_READY:this._NOT_READY},getProgress:function(e){var t=this._PARANOIA_LEVELS[e?e:this._defaultParanoia];return this._strength>=t?1:this._poolStrength>t?1:this._poolStrength/t},startCollectors:function(){if(this._collectorsStarted)return;if(window.addEventListener)window.addEventListener("load",this._loadTimeCollector,!1),window.addEventListener("mousemove",this._mouseCollector,!1);else{if(!document.attachEvent)throw new dt.exception.bug("can't attach event");document.attachEvent("onload",this._loadTimeCollector),document.attachEvent("onmousemove",this._mouseCollector)}this._collectorsStarted=!0},stopCollectors:function(){if(!this._collectorsStarted)return;window.removeEventListener?(window.removeEventListener("load",this._loadTimeCollector,!1),window.removeEventListener("mousemove",this._mouseCollector,!1)):window.detachEvent&&(window.detachEvent("onload",this._loadTimeCollector),window.detachEvent("onmousemove",this._mouseCollector)),this._collectorsStarted=!1},addEventListener:function(e,t){this._callbacks[e][this._callbackI++]=t},removeEventListener:function(e,t){var n,r,i=this._callbacks[e],s=[];for(r in i)i.hasOwnProperty(r)&&i[r]===t&&s.push(r);for(n=0;n<s.length;n++)r=s[n],delete i[r]},_pools:[new dt.hash.sha256],_poolEntropy:[0],_reseedCount:0,_robins:{},_eventId:0,_collectorIds:{},_collectorIdNext:0,_strength:0,_poolStrength:0,_nextReseed:0,_key:[0,0,0,0,0,0,0,0],_counter:[0,0,0,0],_cipher:undefined,_defaultParanoia:6,_collectorsStarted:!1,_callbacks:{progress:{},seeded:{}},_callbackI:0,_NOT_READY:0,_READY:1,_REQUIRES_RESEED:2,_MAX_WORDS_PER_BURST:65536,_PARANOIA_LEVELS:[0,48,64,96,128,192,256,384,512,768,1024],_MILLISECONDS_PER_RESEED:3e4,_BITS_PER_RESEED:80,_gen4words:function(){for(var e=0;e<4;e++){this._counter[e]=this._counter[e]+1|0;if(this._counter[e])break}return this._cipher.encrypt(this._counter)},_gate:function(){this._key=this._gen4words().concat(this._gen4words()),this._cipher=new dt.cipher.aes(this._key)},_reseed:function(e){this._key=dt.hash.sha256.hash(this._key.concat(e)),this._cipher=new dt.cipher.aes(this._key);for(var t=0;t<4;t++){this._counter[t]=this._counter[t]+1|0;if(this._counter[t])break}},_reseedFromPools:function(e){var t=[],n=0,r;this._nextReseed=t[0]=(new Date).valueOf()+this._MILLISECONDS_PER_RESEED;for(r=0;r<16;r++)t.push(Math.random()*4294967296|0);for(r=0;r<this._pools.length;r++){t=t.concat(this._pools[r].finalize()),n+=this._poolEntropy[r],this._poolEntropy[r]=0;if(!e&&this._reseedCount&1<<r)break}this._reseedCount>=1<<this._pools.length&&(this._pools.push(new dt.hash.sha256),this._poolEntropy.push(0)),this._poolStrength-=n,n>this._strength&&(this._strength=n),this._reseedCount++,this._reseed(t)},_mouseCollector:function(e){var t=e.x||e.clientX||e.offsetX||0,n=e.y||e.clientY||e.offsetY||0;dt.random.addEntropy([t,n],2,"mouse")},_loadTimeCollector:function(e){dt.random.addEntropy((new Date).valueOf(),2,"loadtime")},_fireEvent:function(e,t){var n,r=dt.random._callbacks[e],i=[];for(n in r)r.hasOwnProperty(n)&&i.push(r[n]);for(n=0;n<i.length;n++)i[n](t)}},function(){try{var e=new Uint32Array(32);crypto.getRandomValues(e),dt.random.addEntropy(e,1024,"crypto.getRandomValues")}catch(t){}}();for(var vt in dt.beware)dt.beware.hasOwnProperty(vt)&&dt.beware[vt]();var mt={sjcl:dt,version:"1.3.0"};mt.generateAesKey=function(){return{key:dt.random.randomWords(8,0),encrypt:function(e){return this.encryptWithIv(e,dt.random.randomWords(4,0))},encryptWithIv:function(e,t){var n=new dt.cipher.aes(this.key),r=dt.codec.utf8String.toBits(e),i=dt.mode.cbc.encrypt(n,r,t),s=dt.bitArray.concat(t,i);return dt.codec.base64.fromBits(s)}}},mt.create=function(e){var n=function(e){var t=[];if(e.typeName()=="INTEGER"){var r=e.posContent(),i=e.posEnd(),s=e.stream.hexDump(r,i).replace(/[ \n]/g,"");t.push(s)}if(e.sub!=null)for(var o=0;o<e.sub.length;o++)t=t.concat(n(e.sub[o]));return t},r=function(){try{var r=o(e),i=t.decode(r)}catch(s){throw"Invalid encryption key. Please use the key labeled 'Client-Side Encryption Key'"}var u=n(i);if(u.length!=2)throw"Invalid encryption key. Please use the key labeled 'Client-Side Encryption Key'";var a=u[0],f=u[1],l=new ft;return l.setPublic(a,f),l},i=function(){return{key:dt.random.randomWords(8,0),sign:function(e){var t=new dt.misc.hmac(this.key,dt.hash.sha256),n=t.encrypt(e);return dt.codec.base64.fromBits(n)}}},s=function(e){var t=r(),n=mt.generateAesKey(),s=i(),o=n.encrypt(e),u=s.sign(dt.codec.base64.toBits(o)),a=dt.bitArray.concat(n.key,s.key),f=dt.codec.base64.fromBits(a),l=t.encrypt_b64(f),c="$bt4|javascript_"+p.version.replace(/\./g,"_")+"$";return c+l+"$"+o+"$"+u},u=function(e){var t,n;return n=[],t=function(e){for(var r=0,i;r<e.children.length;r++)i=e.children[r],i.attributes["data-encrypted-name"]?n.push(i):t(i)},t(e),n},a=function(e,t){var n,r,i;n=document.createElement(e);for(r in t)i=t[r],n.setAttribute(r,i);return n},f=function(e){return window.jQuery&&e instanceof jQuery?e[0]:e.nodeType&&e.nodeType===1?e:document.getElementById(e)},l=function(e){var t,n,r,i,s,o;e=f(e),o=u(e);for(s=0;s<o.length;s++)t=o[s],r=t.getAttribute("data-encrypted-name"),n=p.encrypt(t.value),t.removeAttribute("name"),i=a("input",{value:n,type:"hidden",name:r}),e.appendChild(i)},c=function(e,t){var n;e=f(e),n=function(n){return p.encryptForm(e),t==null?n:t(n)},window.jQuery?window.jQuery(e).submit(n):e.addEventListener?e.addEventListener("submit",n,!1):e.attachEvent&&e.attachEvent("onsubmit",n)},h={encryptForm:l,extractForm:f,onSubmitEncryptForm:c},p=new function(){this.encrypt=s,this.version=mt.version,this.publicKey=e,this.encryptForm=l,this.formEncrypter=h,this.onSubmitEncryptForm=c};return dt.random.startCollectors(),p},window.Braintree=mt,typeof define=="function"&&define("braintree",[],function(){return mt})})();